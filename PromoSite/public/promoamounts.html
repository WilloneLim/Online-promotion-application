<!DOCTYPE html>
<html lang="en">
<head>
    <title>Promo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,
    initial-scale=1.0" />
    <!-- Bootstrap -->
    
    <link rel="icon" type="image/png" href="images/Logo.png"/>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-grid.css">
    <link rel="stylesheet" href="css/bootstrap-grid.css.map">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css.map">
    <link rel="stylesheet" href="css/bootstrap.css.map">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css.map">
   <link rel="stylesheet" type="text/css" href="css/main.css">
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.1/dist/html2canvas.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css" rel="stylesheet"/>
    <!--from another tuts:s-->
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
  <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/7.1.0/firebase.js"></script>
  <!--<script language="javascript" type="text/javascript" src="sketch.js"></script>-->
    <!--from another tuts:e-->
</head>
<body id ="main">
    <div class="header">
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <div class="container">
        <a class="navbar-brand" href="promoter.php?id=<?php echo $_SESSION["pro_id"]; ?>">
            <img src="images/navnav.png" height="30" alt="PromoAlert Logo">
        </a>
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" onclick="myLogout()">Log Out</a>
            </li>
          </ul>
            </div>
        </nav>
    </div>
<div class="container px-5" id="promoimg">    

  
 
<div class="container px-5" id="promoimg">
<div class="row">
<!--<div class="col-md-6 image">
<img src="images/'.$row['promo_img'].'" alt="tealiveid" id="imginfo">
</div>-->
          
<div class="col-md-6 title" style="text-align:justify;">
<!--'<h1>'.$row['promo_title'].</h1>'; -->
<!--<br/>
<p>Receive up to 20% off for the selected promotion. Price shown reflects discount. Offer ends 8/15/2019 at 11:59 PM GMT. Offer valid for a limited time only.This offer does not apply to gift cards, applicable taxes, or shipping and handling. Offer cannot be combined with any other offers or used on previous purchases.</p>
</div> 
          
</div>
     <hr class="w-80 mt-5" />
     <div class="col-md-12">
     <h2 align="center" class="graphtitle"> Promotion Statistics</h2>';
     echo '<hr class="w-80 mb-5" />';
     echo'</div>';
        
     echo'<br/>';
        
      echo'<div class="row">';
        echo'<div id="prof" class="col-md-12">';
            echo'<div id="chartLegend" class="line-chart-legend"></div>';
            echo'<div id="chart"></div>';  
        echo'</div>';
        echo'<br/>';
          
        echo'<div class="col-md-12"><button class="download w-50 d-block bg-warning text-dark font-weight-bold my-5 mx-auto" onclick="saveAsPDF();">Download</button>'; 
        echo'</div>';
      echo'</div>';
//    echo'</div>';
     }
 }
    
    <div class="col-md-10 mx-auto mb-5 pb-5">
    <h4 class="text-center mt-5">Recent Transactions</h4> 
        <hr/>
    <div class="table-responsive">
               <table class="table table-striped table-hover border">
                   <thead>
                       <tr>
                           <th>Transaction date</th>
                           <th>Promotion</th>
                           <th>Customer</th>
                       </tr>
                   </thead>
                  
                   
                        }
                   }
                  
               </table>
          </div>
        </div>
        </div>-->
    <script>
        
window.onload = function () {

var chart = new CanvasJS.Chart("chartContainer", {
	animationEnabled: true,
	title:{
		text: "Sales Amount"
	},
	axisX:{
		valueFormatString: "DD MMM",
		crosshair: {
			enabled: true,
			snapToDataPoint: true
		}
	},
	axisY: {
		title: "Amount (in RM)",
		includeZero: false,
		valueFormatString: "$##0.00",
		crosshair: {
			enabled: true,
			snapToDataPoint: true,
			labelFormatter: function(e) {
				return "$" + CanvasJS.formatNumber(e.value, "##0.00");
			}
		}
	},
	data: [{
		type: "area",
		xValueFormatString: "DD MMM",
		yValueFormatString: "$##0.00",
		dataPoints: [
			{ x: new Date(2019, 10, 06), y: 23 },
			{ x: new Date(2019, 10, 07), y: 12 },
            { x: new Date(2019, 10, 07), y: 12 },
            { x: new Date(2019, 10, 06), y: 150 },
            { x: new Date(2019, 10, 07), y: 12 },
            { x: new Date(2019, 10, 07), y: 12 }
            
            ]
			
		
	}]
});
chart.render();

}
</script>

<div id="chartContainer" style="height: 300px; width: 300%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

       <!-- var database;

function setup(){

var firebaseConfig = {
            apiKey: "AIzaSyCA_sMgKuNxk2ngSqJRSX8aAvmrn80fBPo",
            authDomain: "onlinepromoapp.firebaseapp.com",
            databaseURL: "https://onlinepromoapp.firebaseio.com",
            projectId: "onlinepromoapp"
        };
        // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
        database = firebase.database();
        
        
        var ref = database.ref('onlinepromoapp/transaction/');
        console.log(ref);
        ref.on('value', gotData, errData);
    
    
}
 function gotData(data){
            //console.log(data.val());
            
        
    var transaction = 

        data.val();
            var keys =Object.keys(transaction);
            var amountdata = [];
            var createdata = [];
            console.log(keys);
            for (var i = 0; i < keys.length; i++){
                var k = keys[i];
                console.log(k);
                var Amount = transaction[k].Amount;
                console.log(Amount)
                var Date = transaction[k].Created;
                var chartDataAmount = [];
                var chartDataCreate = [];
                chartDataAmount.push(Amount);
                amountdata.push(Amount);
                createdata.push(Date)
                chartDataAmountDate.push(Date);
            }
     
     console.log(amountdata);
     
     var myChart = new Chart(ctx, {
         type: 'line',
         data: {
             labels: createdata,
             datasets: [{
                 label: 'Daily Sales Graph',
                 data: amountdata,
                 
             }]
         },
         options:{
             scales:{
                 yAxes: [{
                     ticks: {
                         beginAtZero:true
                     }
                     
                 }],
                 xAxes: [{
                     type: 'time',
                     time: {
                         format: "DD HH:mm",
                         unit:'day''hour',
                         
                     },
                 }]
             }
         }
         
     });



   function errData(err) {
    console.log('Error!');
     console.log(err);
} 
       // window.onload = function () {
            
            //var chart = new CanvasJS.Chart("chartContainer",})
        
  
    </script>
    <div onload="gotData(data)"></div>-->
    
<!--<footer class="page-footer bg-secondary font-small mt-5 pt-4">
  <div class="container-fluid text-center text-md-left">
    <div class="row mx-auto">
      
        <hr class="clearfix w-100 d-md-none pb-3">
        <div class="col-md-1"></div> 
      <div class="col-md-5 mb-md-0 mb-3">
        <h5 class="text-uppercase text-white font-weight-bold">Contact Us</h5>
          <hr class="bg-light w-50 ml-0"/>
        <p class="text-white">
            <b>Jimsley Lim</b><br/>
            +6016-889 7598
            <br/>
            <br/>
            <b>Nicholas Bong</b><br/>
            +6016-816 2962</p>
          <br/>
          <br/>

      </div>
        <div class="col-md-5 mt-md-0 mt-3">
        <h5 class="text-uppercase text-white font-weight-bold">Introducing Xense,</h5>
            <hr class="bg-light w-50 ml-0"/>
        <p class="text-white"><b>A fusion of technology and human senses.</b><br/>From programmers to business developer, Xense comprises of talented and excellence-driven individuals with high enthusiasm in the development of technology solution. 
        We aim high at embracing technology with a passion for sustainability, innovation and empowerment by using our creative gifts that drives this foundation.</p>
          <br/>
          <br/>

      </div>
    </div>
  </div>
-->
  <!-- Copyright -->
  <!--<div class="footer-copyright text-white bg-dark text-center py-3">Â© 2019 Copyright:
    <a href="#"> Xense.com</a>
  </div>-->
    <script>
        var db;
    db.collection('transaction').where('Created', "==", "2019/10/07")
    .get()
    .then(function(querySnapshot) {
        querySnapshot.forEach(function(doc) {
            // doc.data() is never undefined for query doc snapshots
            console.log(doc.id, " => ", doc.data());
        });
    })
    .catch(function(error) {
        console.log("Error getting documents: ", error);
    });</script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-database.js"></script>
  <!-- Copyright -->

</footer>    
     
         
        
      <script>
   
         function saveAsPDF() {
    html2canvas(document.getElementById('prof')).then(canvas => {
        

        var img = canvas.toDataURL("image/png", 1);

        var doc = new jsPDF('L', 'pt', [canvas.width,canvas.height]);
        doc.addImage(img, 'PNG', 10, 10, canvas.width,canvas.height);
        doc.save('Statistics.pdf');
    }).catch(function(e) {
        console.log(e.message);
    });
}
   
    </script>
    
       <script>
    function myLogout() {
      var txt;
      if (confirm("Are you sure you want to log out?")) {
            window.location.href ="logout.php";
      }
      document.getElementById("demo").innerHTML = txt;
    }
    </script> 
    
</body>
</html>