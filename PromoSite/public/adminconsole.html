<!DOCTYPE html>
<html lang="en">
<head>
    <title>Promo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,
    initial-scale=1.0" />
    <!-- Bootstrap -->
    
    <link rel="icon" type="image/png" href="images/Logo.png"/>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-grid.css">
    <link rel="stylesheet" href="css/bootstrap-grid.css.map">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css.map">
    <link rel="stylesheet" href="css/bootstrap.css.map">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css.map">
   <link rel="stylesheet" type="text/css" href="css/main.css">
   <link rel="stylesheet" type="text/css" href="css/main3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        @import url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');

        *,
        *::before,
        *::after {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        html, body {
/*          height: 100vh;*/
        }

        body {
        /*  font: 500 1.2rem/1 'Avenir Next', sans-serif;*/
          color: #333;
          background: rgb(45,48,58);
        }

        

        .buttonA {
          cursor: pointer;
        }

        .buttonA svg {
          width: 40px;
        }

        .buttonA line {
          stroke: black;
          stroke-width: 5;
        }

        h1 {
          margin-top: 25px;
          font-size: 40px;
          font-weight: 400;
        }

        .navA {
          list-style: none;
            padding-left: 20px;
        }

        .navA li a {
            font-size: 16px;
            position: relative;
            display: block;
            padding: 16px 16px 16px 50px;
            color: #fff;
            cursor: pointer;
        }

        .navA li a:hover,
        .navA li a.active {
            
          background: rgba(0,0,0,.3);
        }

        .navA li a::before {
          font: 14px fontawesome;
          position: absolute;
          top: 15px;
          left: 20px;
        }

        .logo{
          width: 100%;
          margin: 30px 0px;
        }
        
        .debtn{
/*            background-color: #008CBA;*/
            border: 2px solid #008CBA;
            color: #008CBA;
            padding: 15px;
/*            text-align: center;*/
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-top: 0px;
            border-radius: 10px;
            cursor: pointer;
        }

              /*my dropdown*/

        /* Dropdown container (hidden by default). Optional: add a lighter background color and some left padding to change the design of the dropdown content */
        .dropdown-container {
            display: none;
            background: rgba(0,0,0,.3);
            margin-top: 0;
        /*  padding-left: 8px;*/
        }

        /* Optional: Style the caret down icon */
        .fa-caret-down {
          float: right;
/*          padding-right: 8px;*/
        }
        
        #dropdown-container {
            background: rgba(0,0,0,.3);
            margin-top: 0px;
        }
        
        #dropdown-btn {
            margin: 0px;
        }
        
        
        
        
        #comm {
            width: 70px;
            height: auto;
            margin-top: 30px;
            margin-left: 20px;
        }
        
        #tran {
            width: 70px;
            height: auto;
            margin-top: 20px;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        #sale {
            width: 70px;
            height: auto;
            margin-top: 20px;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        

        /*      ~~~*/

        .navA li:nth-child(2) a::before { content: '\f00a'; }
        .navA li:nth-child(3) a::before { content: '\f012'; }
        .navA li:nth-child(4) a::before { content: '\f022'; }
        .navA li:nth-child(5) a::before { content: '\f02d'; }
        .navA li:nth-child(6) a::before { content: '\f085'; }
        .navA li:nth-child(7) a::before { content: '\f023'; left: 23px; }
        
    </style>
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.4"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
    <!--from another tuts:s-->
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
  <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/7.1.0/firebase.js"></script>
</head>
<body id ="main">
    
<div class="wrapper">
  <div class="sidebar">
    <ul class="navA">
        <li><img src="images/navnav.png" id="logo"></li>
        <li><a class="active text-light" href="adminconsole.html">Dashboard</a></li>
        <li><a class="text-light" href="admin_promoters.html">Promoters</a></li>
        <li>
        <a class="text-light" id="dropdown-btn" onclick="openHI()">Applications<i class="fa fa-caret-down"></i></a>
<!--        <button class="dropdown-btn">Dropdown </button>-->
          <div id="dropdown-container" style="display:none;">
            <a href="viewapplicationsadmin.html">Account</a>
            <a href="viewpromoappsadmin.html">Promotion</a>
          </div>
        </li>
        
        <li><a class="text-light" href="admin_transactions.html">Transactions</a></li>
        <li><a class="text-light" href="admin_settings.html">Settings</a></li>
        <li><a class="text-light" id="logout">Log Out</a></li>
    </ul>
  </div>
    
  <div class="contentA isOpen">
      
      <div class="bg-white mt-0 mb-2 py-2 d-flex justify-content-between">
          <h4 class="col-md-10 pl-4">Dashboard</h4>
          <h4 class="col-md-1"><i class="fa fa-envelope" id="notification"></i></h4>
          <h4 class="col-md-1"><i class="fa fa-user"  id="notification"></i></h4>
      </div>
      
      
      <div class="container">
        <div class="row">
        <div class="col-md-9 whitebg">
            <div class="row">
                <div id="prof" class="col-md-11">
                    <div id="chart" class="col-md-12">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>
                <div class="col-md-1">
                    <button class="download debtn" onclick="saveAsPDF();"><i class="fa fa-download"></i></button>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="row">
                <div class="col-md-12 whitebg pb-2">
                    <div class="row">
                    <div class="col-md-5">
                        <p>Commision Rate</p>
                        <h3>0.3%</h3>
                    </div>
                        <div class="col-md-5">
                            <img id="comm" src="images/comm.png">
                        </div>
                        
                    </div>
                </div>
                
            </div>
            <div class="row">
                <div class="col-md-12 whitebg pb-2">
                    <div class="row">
                    <div class="col-md-5">
                        <p>Sales</p>
                        <h3>15300</h3>
                    </div>
                        <div class="col-md-5">
                            <img id="sale" src="images/Sales.png">
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 whitebg pb-2">
                    <div class="row">
                    <div class="col-md-5">
                        <p>Transactions</p>
                        <h3>2457</h3>
                    </div>
                        <div class="col-md-5">
                            <img id="tran" src="images/tran.png">
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        </div>
        <div class="row">
      <div class="col-md-11 whitebg p-3">
    <form class="admin-form" style="display: block;">
        <div class="form-group">

          <label for="post-title">Admin Add</label>
          <input type="text" class="form-control"  id="admin-add" required />
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
      </div>
      </div>
      
      </div>
  </div>
</div>
    <script>
//    document.querySelector('.buttonA').addEventListener('click', () => {
//      document.querySelector('.contentA').classList.toggle('isOpen');
//    });
        
        
        /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
    var dropdown = document.getElementById("dropdown-btn");
    var i;
        
        
        var dropdownContent = document.getElementById("dropdown-container");

//      dropdown.addEventListener("click", function() {
//      this.classList.toggle("active");
//      var dropdownContent = document.getElementById("dropdown-btn");
      
//      });  
    </script>
    <script>
    function openHI(){
        if (dropdownContent.style.display === "block") {
          dropdownContent.style.display = "none";
          } else {
          dropdownContent.style.display = "block";
          }
    }
        
        
    </script>
          

    <script>
   
            function saveAsPDF() {
            html2canvas(document.getElementById('prof')).then(canvas => {


            var img = canvas.toDataURL("image/png", 1);

            var doc = new jsPDF('L', 'pt', [canvas.width,canvas.height]);
            doc.addImage(img, 'PNG', 10, 10, canvas.width,canvas.height);
            doc.save('Statistics.pdf');
        }).catch(function(e) {
            console.log(e.message);
        });
    }
    </script>
    <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-functions.js"></script>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCA_sMgKuNxk2ngSqJRSX8aAvmrn80fBPo",
            authDomain: "onlinepromoapp.firebaseapp.com",
            databaseURL: "https://onlinepromoapp.firebaseio.com",
            projectId: "onlinepromoapp"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        // make auth and firebase ref
        const auth = firebase.auth();
        const db = firebase.firestore();
        const functions = firebase.functions();
        
        
    </script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    
    <script>
        //UPLOADCARE
        UPLOADCARE_LOCALE = "en";
        UPLOADCARE_LIVE = "false";
        UPLOADCARE_PUBLIC_KEY = "566cf60ccd0f048ca3df";
    </script>
    
    <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js" charset="utf-8"></script>
    <script src="scripts/auth.js"></script>
    <script>

var labelsArray = [];
var dataArray = [];

db.collection('transaction').orderBy('Created','asc').get().then((snapshot) => {
    snapshot.docs.forEach(doc => {
        var item = doc.data();

        var price = item.Amount;
        dataArray.push(price);

        var date = item.Created;
        labelsArray.push(date);
    });
});

var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
type: 'line',
data: {
    labels: labelsArray,
    datasets: [{
        label: 'TRANSACTIONS PROMOAPPLICATION',
        data: dataArray , 
          backgroundColor: [
                'rgba(255,255,51,0.2)'
            ],
            borderColor: [
                'rgba(255,153,0,1)'
                
            ],
        
    }]
},
options: {
    scales: {
        xAxes: [{
            scaleLabel: {
                display: true,
                labelString: 'Date'
            }
        }],
        
        yAxes: [{
            ticks: {
                beginAtZero: true
            },
            scaleLabel: {
					display: true,
					labelString: 'Profit (RM)'
				}
        }]
    },
    //add tooltips
    tooltips: {
        mode: 'nearest',
        intersect: false
    },
    hover: {
			mode: 'nearest',
			intersect: false
    },
    // Container for pan options
    pan: {
        // Boolean to enable panning
        enabled: true,

        // Panning directions. 
        mode: 'x',
       
        speed: 5,
      threshold: 5
    },

    // Container for zoom options
    zoom: {
        // enable zooming
        enabled: true,                      
        // Zooming directions. 
        mode: 'x',
        
        }
    }
});

setInterval(function() { myChart.update();}, 1000); 
   
//$('#reset_zoom').click(function(){
//    myChart.resetZoom();
//    console.log(myChart);
//});

//$('#disable_zoom').click(function(){
//    myChart.ctx.canvas.removeEventListener('wheel', myChart._wheelHandler);
//});
//
//$('#enable_zoom').click(function(){
//    myChart.ctx.canvas.addEventListener('wheel', myChart._wheelHandler);
//});

</script>
   
    </body>
</html>
